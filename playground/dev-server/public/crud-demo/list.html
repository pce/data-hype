<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hype CRUD list demo (markup-first)</title>
  <meta name="description" content="List CRUD demo for Hype. Markup-first: the page declares intent and the runtime wires behavior." />
  <link rel="stylesheet" href="/static/css/crud-demo.css" />
</head>
<body>
  <noscript>
    <div role="status" aria-live="polite" class="msg" style="margin:12px; padding:12px; background:#fff3cd; border:1px solid #ffeeba; color:#856404; border-radius:6px;">
      This demo requires JavaScript. Please enable JavaScript to run the Hype runtime.
    </div>
  </noscript>

  <main class="page" role="main" aria-labelledby="list-demo-title">
    <header>
      <h1 id="list-demo-title">CRUD — List demo (markup-first)</h1>
      <p class="lead">A stacked list demo. The markup contains templates and data attributes; Hype renders and wires interactions. No demo-specific inline JS is included.</p>
    </header>

    <!-- Declarative create form -->
    <section aria-labelledby="create-heading" style="margin-top:12px;">
      <h2 id="create-heading" class="sr-only">Create item</h2>
      <form id="create-form" data-hype-crud="items-create" class="controls" aria-label="Create item">
        <input name="title" type="text" placeholder="Title" required autocomplete="off" />
        <input name="score" type="number" placeholder="Score" value="0" />
        <button type="submit" class="primary">Create</button>
      </form>
    </section>

    <div id="status" class="msg" aria-live="polite" style="margin-top:10px;">Loading…</div>

    <!-- List root: Hype CRUD + datatable plugins should use this root to render items -->
    <section aria-labelledby="items-heading" class="list-root" style="margin-top:18px;">
      <h2 id="items-heading" class="sr-only">Items</h2>

      <ul id="items-list"
          role="list"
          data-hype-crud="items"
          data-hype-crud-endpoint="/api/items"
          aria-describedby="status"
          style="list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:12px;">
        <!-- Items will be rendered here by the datatable / crud plugin -->
      </ul>
    </section>

    <!-- Template used by the datatable / crud plugin.
         Plugins must clone this template and populate fields using safe DOM APIs (textContent, setAttribute). -->
    <template id="item-tpl" aria-hidden="true">
      <li class="card" role="listitem" style="padding:12px;border-radius:10px;background:var(--card);box-shadow:0 2px 10px rgba(11,23,36,0.04);">
        <div style="display:flex;gap:10px;align-items:center;">
          <div class="id-badge td-id" aria-hidden="true" style="flex:0 0 auto;"></div>
          <div style="flex:1 1 auto;">
            <div class="title td-title" style="font-weight:600;"></div>
            <div class="score td-score text-muted" style="font-size:13px;"></div>
          </div>
          <div class="actions" data-cell="actions" style="flex:0 0 auto;display:flex;gap:8px;">
            <button data-action="edit" type="button" aria-label="Edit item">Edit</button>
            <button data-action="delete" type="button" aria-label="Delete item">Delete</button>
          </div>
        </div>

        <div class="desc td-desc" style="margin-top:8px;color:var(--muted);font-size:14px;"></div>
      </li>
    </template>

    <div id="debug" class="msg" aria-hidden="true" style="margin-top:12px;"></div>
  </main>

  <!-- CSP-friendly bootstrap: external ES module that imports Hype and autowires optional plugins (crud, datatable). -->
  <script type="module" src="/static/js/crud-demo-bootstrap.js" defer></script>
</body>
</html>
