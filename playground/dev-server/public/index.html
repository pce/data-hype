<!doctype html>
<html lang="en" class="min-h-screen">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hype Playground</title>
  <meta name="description" content="Hype playground examples (development). Progressive, CSP-friendly examples using declarative templates." />

  <!-- Dev CSP: module scripts & same-origin styles allowed. Adjust for production. -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self' data:; script-src 'self'; connect-src 'self' ws: wss: http: https:; style-src 'self' https:; img-src 'self' data: https:;" />

  <!-- External styles only (no inline styles) -->
  <link rel="stylesheet" href="/tailwind.css" />
  <link rel="stylesheet" href="/static/css/index.css" />
</head>

<!--
  Minimal declarative theme wiring using Hype:
  - body state key: `dark` (boolean)
  - `data-hype-on-click='["toggle","dark"]'` toggles the boolean
  - `data-hype-class-...` applies classes on the body reactively
-->
<body
  class="  bg-gray-100 p-8 bg-gradient-to-b from-teal-800 to-gray-400"
  data-hype-state='{"dark":false}'
  data-hype-class-earthone-dark='["get","dark"]'
  data-hype-class-earthone-light='["!","get","dark"]'
>


  <div class="wrap container mx-auto px-6 py-8">
    <!--<header class="card mb-6" role="banner" aria-label="Hype Playground header">
      <div class="flex items-center justify-between gap-6">
        <div class="flex items-center gap-4">
          <div class="logo rounded-lg flex items-center justify-center w-12 h-12 text-white font-bold bg-gradient-to-br from-orange-500 to-rose-500">H</div>
          <div></div>
            <h1 class="text-lg font-semibold m-0">Hype — Playground (dev)</h1>
            <p class="text-sm text-muted m-0">.</p>
          </div>
        </div>-->

            <!--<div class="controls" aria-hidden="true">
              <a class="btn btn" href="/">Back</a>
              <button id="reloadBtn" class="btn" title="Reload gallery">Reload</button>
            </div>-->

          <div class="max-w-4xl mx-auto">
            <header class="mb-8">
                <h1 class="text-7xl md:text-8xl  text-white leading-none tracking-tighter font-thin">
                    Hype
                <span class="text-7xl ml-auto block mt-3 text-transparent bg-clip-text bg-gradient-to-r from-orange-400 via-rose-400 to-amber-400 tracking-tighter">
                    data-hype-
                </span>
                </h1>
                <!--<h1 class="text-3xl font-bold text-gray-900 mb-2"></h1>-->
              <!--<p class="">Replacing verbose Django + JavaScript with Hype Reactive</p>-->
              <p class="text-gray-600 text-thin ml" >Progressive, CSP-friendly examples using declarative templates.</p>
            </header>

      </div>

    <main>
      <section class="card mb-6" aria-labelledby="examples">
        <h2 id="examples" class="text-xl font-semibold mb-2">Examples</h2>
        <p class="text-sm text-muted mb-4">Open any example — pages progressively enhance when the Hype runtime is available at <code class="inline">/static/js/hype.js</code>.</p>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <a class="link-card p-4 rounded" href="/live.html" role="listitem">
            <h3 class="font-bold text-base m-0">Live — Stocks (WebSocket)</h3>
            <p class="text-sm text-muted m-0 mt-2">WebSocket-driven live ticker (/_hype_live).</p>
          </a>

          <a class="link-card p-4 rounded" href="/sse.html" role="listitem">
            <h3 class="font-bold text-base m-0">SSE — Stocks</h3>
            <p class="text-sm text-muted m-0 mt-2">Server-Sent Events demo (<code class="inline">/stocks/sse</code>).</p>
          </a>

          <a class="link-card p-4 rounded" href="/reactive.html" role="listitem">
            <h3 class="font-bold text-base m-0">Reactive — Examples</h3>
            <p class="text-sm text-muted m-0 mt-2">State, show, classes and binds using DSL JSON.</p>
          </a>

          <a class="link-card p-4 rounded" href="/pubsub.html" role="listitem">
            <h3 class="font-bold text-base m-0">Pub/Sub demo</h3>
            <p class="text-sm text-muted m-0 mt-2">Hype pubsub and DOM CustomEvent bridge.</p>
          </a>

          <a class="link-card p-4 rounded" href="/django.html" role="listitem">
            <h3 class="font-bold text-base m-0">Django integration</h3>
            <p class="text-sm text-muted m-0 mt-2">Server templates & optimistic UI examples.</p>
          </a>

          <a class="link-card p-4 rounded" href="/reactive_counter.html" role="listitem">
            <h3 class="font-bold text-base m-0">Reactive Counter</h3>
            <p class="text-sm text-muted m-0 mt-2">Minimal starter showing DSL handlers & binds.</p>
          </a>
        </div>
      </section>

      <section class="card mb-6" aria-labelledby="endpoints">
        <h2 id="endpoints" class="text-xl font-semibold mb-2">Dev server endpoints</h2>
        <ul class="text-sm text-muted list-disc pl-6">
          <li><code class="inline">GET /</code> — this index page</li>
          <li><code class="inline">GET /api/items</code> — JSON snapshot of demo items</li>
          <li><code class="inline">GET /_hype_snapshot/:id</code> — HTML fragment for a region</li>
          <li><code class="inline">GET /_hype_join_token/:id</code> — short-lived join token for WebSocket joins (dev)</li>
          <li><code class="inline">POST /items/:id/toggle</code> — toggle an item's state (form or XHR)</li>
          <li><code class="inline">WS /_hype_live</code> — preferred WebSocket endpoint for live protocol</li>
          <li><code class="inline">GET /stocks/sse</code> — SSE endpoint used by the SSE examples</li>
        </ul>

        <div class="mt-4">
          <strong>Run dev server</strong>
          <pre class="cmd mt-2">cd hype/playground/dev-server
pnpm install
pnpm run dev</pre>

          <p class="text-sm text-muted mt-2">When the dev server runs it serves the public folder. Examples will progressively enhance when the runtime is present.</p>
        </div>
      </section>

      <section class="card mb-6" aria-labelledby="dsl">
        <h2 id="dsl" class="text-xl font-semibold mb-2">DSL JSON — CSP-friendly examples</h2>
        <p class="text-sm text-muted mb-4">Prefer DSL JSON attributes. The runtime parses JSON and evaluates via a safe interpreter (no eval/new Function).</p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="card p-4">
            <h3 class="font-semibold">Toggle</h3>
            <p class="text-sm text-muted">Toggle state declaratively:</p>
            <pre class="cmd mt-2"><code>&lt;div data-hype-state='{"open":false}'&gt;
  &lt;button data-hype-on-click='["toggle","open"]'&gt;Toggle&lt;/button&gt;
  &lt;div data-hype-show="open"&gt;Shown when open&lt;/div&gt;
&lt;/div&gt;</code></pre>
          </div>

          <div class="card p-4">
            <h3 class="font-semibold">Optimistic server sync</h3>
            <p class="text-sm text-muted">Optimistic toggle + server fetch (assumes backend):</p>
            <pre class="cmd mt-2"><code>&lt;button
  data-hype-state='{"favorited":false,"syncing":false}'
  data-hype-post="/api/jobs/123/toggle-favorite"
  data-hype-swap="none"
  data-hype-on-click='["seq",["toggle","favorited"],["set","syncing",true],["pub","$fetch",null]]'
&gt;Favorite&lt;/button&gt;</code></pre>
          </div>
        </div>
      </section>
    </main>

    <footer class="card text-center mt-6" role="contentinfo">
      Hype playground — dev • <span class="text-sm text-muted">examples assume backend endpoints exist; tighten CSP and origins for production</span>
    </footer>
  </div>

  <!-- Non-inline module loader that binds auth and attempts to load the Hype runtime -->
  <script type="module" src="/static/js/loader.js"></script>
</body>
</html>
